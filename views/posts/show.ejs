<!DOCTYPE html>
<html>
  <head>
    <% include ../partials/head %>
  </head>
  <body>
    <header>
      <% include ../partials/header %>
    </header>
    <div class="posts">
    <% include partials/top %>
<!-- main start(실제 view) -->
    <div class="show">
      <h3><%= post.title %></h3>
      <div class="time">Created at <br>
        <%= post.createdAt.toLocaleDateString() %> <br>
        <%= post.createdAt.toLocaleTimeString() %>
      </div>
      <% if(post.updatedAt) { %>
        <div class="time">Updated at <br>
          <%= post.updatedAt.toLocaleDateString() %> <br>
          <%= post.updatedAt.toLocaleTimeString() %>
        </div>
      <% } %>
      <p class="body"><%= post.body %><p>
      <div class="float_right">Author: <%= post.author.nickname %></div>
      <% if(user && user.equals(post.author._id)) { %> <!--작성자가 같을 경우에 수정, 삭제 버튼 보여줌 -->
      <div class="tools">
        <a href="/posts/<%=post._id%>/edit"><button>Edit</button></a>
        <!-- Delete button here -->
        <form class="btn_delete" action="/posts/<%=post._id%>?_method=delete" method="post">
          <button type="submit">Delete</button>
        </form>  <!-- form 메소드는 post이나 ?_method=delete가 추가되어 오버라이드 됨 -->
      </div>
      <% } %>
      <a href="/posts"><button>Back</button></a>
    </div>
<!-- main end -->
    </div><!-- posts end -->
    <footer>
      <% include ../partials/footer %>
    </footer>
  </body>
</html>
